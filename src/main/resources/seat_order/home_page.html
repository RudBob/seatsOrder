<!DOCTYPE html>
<html>

<head>
    <meta charset="UTF-8">
    <title></title>
    <link rel="stylesheet" href="bootstraps/css/bootstrap.min.css">
    <link rel="stylesheet" href="Font-Awesome-3.2.1/css/font-awesome.min.css" />
    <style type="text/css">
        body {
            margin: 0;
            padding: 0;
            background-image: url(img/bg.jpg);
        }

        h1 {
            font-size: 70px;
            font-family: "黑体";
            text-align: center;
            vertical-align: middle;
            color: #fff;
            padding-top: 50px;
            padding-bottom: 50px;
            background-color: #000;
        }
        input{
            width: 750px;
            height: 50px;
            font-size: 30px;
        }
        #middle{
            margin-top: 200px;
            text-align: center;
            font-size:12px;
        }
        p{
            margin-bottom: 70px;
        }
        .button{
            width: 550px;
            height: 70px;
            background-color: blue;
            font-size: 45px;
            color: #fff;
        }
        .icon-5x {
            font-size: 5em;
        }

        .modal-dialog {
            position: relative;
            width: 500px;
            margin: 40px auto;
            background: white;
            border-radius: 5px;
        }

        .modal-header {
            padding: 15px;
            border-bottom: 1px solid #e5e5e5;
        }

        .modal-header > i {
            font-weight: bold;
            color: #ADADAD;
            float: right;
            cursor: pointer;
        }

        .modal-body {
            position: relative;
            padding: 15px;
            height: 400px;
            overflow-y: auto;

        }

        .modal-body input {
            width: 450px;
            border-radius: 4px;
            border: 1px solid #DDDDDD;
            outline: none;
            padding: 10px;
            margin: 10px;
        }

        .modal-footer {
            padding: 15px;
            text-align: right;
            border-top: 1px solid #e5e5e5;
        }

    </style>
</head>

<body>
<h1>座位预约管理系统</h1>
<div id="middle">
    <p>
        <i class="icon-pencil icon-5x"></i>
        <button type="submit" id="sign" class="button">签到</button>
        <button type="submit" id="signed" class="button">已签到</button>
    </p>
    <p>
        <i class="icon-list icon-5x"></i>
        <button type="submit" id="fast_order" class="button">快速选座</button>
    </p>
    <p>
        <i class="icon-time icon-5x"></i>
        <button type="submit" id="temp" class="button">暂离</button>
        <button type="submit" id="return" class="button">返回</button>
    </p>
    <p>
        <i class="icon-plus icon-5x"></i>
        <button type="submit" id="continue" class="button" >续座</button>
    </p>
    <p>
        <i class="icon-lock icon-5x"></i>
        <button type="submit" class="button" data-toggle="modal" data-target="#modal_change">修改密码</button>
    </p>
    <p>
        <i class="icon-envelope icon-5x"></i>
        <button type="submit" class="button" data-toggle="modal" data-target="#modal_manage">投诉建议</button>
    </p>
    <p>
        <i class="icon-stop icon-5x"></i>
        <button type="submit" id="over" class="button">结束使用</button>
    </p>
    <!--投诉建议的模态框-->
    <div class="modal fade" id="modal_manage">
        <div class="modal-dialog">
            <div class="modal-content">

                <!-- 模态框头部 -->
                <div class="modal-header">
                    <h4 class="modal-title">投诉建议</h4>
                    <button type="button" class="close" data-dismiss="modal">&times;</button>
                </div>

                <!-- 模态框主体 -->
                <div class="modal-body" style="font-size: 20px;">

                    <p><input type="text" placeholder="可对用户和座位进行投诉或建议"/></p>
                </div>

                <!-- 模态框底部 -->
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-dismiss="modal">确定</button>
                </div>

            </div>
        </div>
    </div>
    <!--修改密码的模态框-->
    <div class="modal fade" id="modal_change">
        <div class="modal-dialog">
            <div class="modal-content">

                <!-- 模态框头部 -->
                <div class="modal-header">
                    <h4 class="modal-title">修改密码</h4>
                    <button type="button" class="close" data-dismiss="modal">&times;</button>
                </div>

                <!-- 模态框主体 -->
                <div class="modal-body" style="font-size: 20px;">
                    <p><input type="test" id="id" placeholder="请输入账户id"/></p>
                    <p><input type="password" id="oldpwd" placeholder="请输入原密码"/></p>
                    <p><input type="password" id="newpwd" placeholder="请输入新密码"/></p>
                    <p><input type="password" id="repeatpwd" placeholder="请再次输入新密码"/></p>
                </div>

                <!-- 模态框底部 -->
                <div class="modal-footer">
                    <button type="button" id="change_ok" class="btn btn-secondary" data-dismiss="modal">确定</button>
                </div>

            </div>
        </div>
    </div>
</div>
<script type="text/javascript" src="js/jquery.min.js"></script>
<script type="text/javascript" src="bootstraps/js/bootstrap.min.js"></script>
<script type="text/javascript" src="layer/layer.js"></script>
<script type="text/javascript">
    $(function () {
        //签到
        $("#signed").hide();
        $("#sign").click(function () {
            $("#sign").hide();
            $("#signed").show();
        });
        //快速选座
        $("#fast_order").click(function () {
            window.location.href = 'fast_order.html';
        });
        //暂离
        $("#return").hide();
        $("#temp").click(function () {
            $("#temp").hide();
            afterthirtym();
            $("#return").show();
        })
        //返回
        $("#return").click(function () {
            $("#return").hide();
            $("#temp").show();
        })
        //续座
        $("#continue").click(function () {
            window.location.href='continue_seat.html';
        });
        //更新密码
        $("#change_ok").click(function(){
            var oldpwd = $("#oldpwd").val();
            var newpwd = $("#newpwd").val();
            var repeatpwd = $("#repeatpwd").val();
            if(newpwd != repeatpwd){
                alert("新输入的两次密码不相同,请重新输入!");
            }else{
                alert(oldpwd);
                alert(newpwd);
                alert(repeatpwd);
                //发送ajax后端校验修改后的两次密码是否相同
                var url = "/seatsOrder/adminSeat/seatNeedRepair";
                var param = "tid=" + tid;
                //发送ajax
                selectPageData_checkpwd(url, param);
            }

        });
        //结束使用
        $("#over").click(function () {
            alert("已成功结束使用!");
            //发送ajax账号退出
            window.location.href='index.html';
        })
    })
    function afterthirtym(){
        var hour = new Date().getHours();
        var minute = new Date().getMinutes();
        if((minute+20) >= 60){
            hour++;
        }
        minute = (minute+20) % 60;
        if(hour > 22){
            alert("自习室即将关闭,不再提供暂离服务!");
        }else{
            alert("请于" + hour + ":" + minute + "返回");
        }
    }
    //调用ajax函数
    function selectPageData_checkpwd(url, param) {
        $.ajax({
            type : "post",//请求方式
            url : url + "?" + param,//发送请求的地址
            async : true,//请求为异步请求
            success : function(data) {//成功时调用的回调函数
                // 返回操作是否成功
                if(data == 200){
                    alert("操作成功!");
                }
                else if(data == 100){
                    showMsg(data.message);					}
            },
            error : function() {//失败时被调用的函数
                alert("网络异常");
            }
        });
    }
    function showMsg(message) {
        alert(message);
    }
</script>
</body>

</html>